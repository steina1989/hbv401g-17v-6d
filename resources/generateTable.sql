PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE [Reviews] ([tripName] Text, [reviewHeader] Text, [reviewText] Text, [stars] Integer);
INSERT INTO "Reviews" VALUES('Blue Lagoon','Excellent tour!','Review 1 for Blue Lagoon',5);
INSERT INTO "Reviews" VALUES('Blue Lagoon','Fantastic experience','Review 2 for Blue Lagoon',3);
INSERT INTO "Reviews" VALUES('Golden Circle','Enlightened!','Review 1 for Golden Circle',5);
INSERT INTO "Reviews" VALUES('Golden Circle','Awesome guide','Review 2 for Golden Circle',2);
INSERT INTO "Reviews" VALUES('Landmannalaugar','A very enjoyable day out','Review 1 for Landmannalaugar',5);
INSERT INTO "Reviews" VALUES('Sightseeing the Highlands','Adam Gorovich approves','Review 1 for Sightseeing the Highlands',1);
INSERT INTO "Reviews" VALUES('Snaefellsnes Whalewatching','Bellisimo!','Review 1 for Snaefellsnes',5);
CREATE TABLE [Guides] ([guideId] Integer, [guideName] Text, [guideDescription] Text, [guideProfileURL] Text);
INSERT INTO "Guides" VALUES(1,'Addison','Highly skilled Guide','https://randomuser.me/api/portraits/women/2.jpg');
INSERT INTO "Guides" VALUES(2,'Avery','With 20 years of experience yadyyadya','https://randomuser.me/api/portraits/women/33.jpg');
INSERT INTO "Guides" VALUES(3,'Cameron','Very good indeed','https://randomuser.me/api/portraits/women/53.jpg');
INSERT INTO "Guides" VALUES(4,'Trump','I know guiding. I give the best guiding. No one guides better than me. Make guiding great again!','https://68.media.tumblr.com/avatar_a268b511f470_128.png');
INSERT INTO "Guides" VALUES(5,'Reese','No, not THAT Reese.','https://randomuser.me/api/portraits/women/13.jpg');
INSERT INTO "Guides" VALUES(6,'Rudy','on rails.','https://randomuser.me/api/portraits/women/3.jpg');
CREATE TABLE [Trips] ([tripId] Integer, [tripName] Text, [dateOfDeparture] Integer, [dateOfReturn] Integer, [tripPrice] Integer, [tripDescription] Text, [seatsAvailable] Integer, [seatsLeft] Integer, [tripCategory] Text, [guideId] Integer, [placeOfDeparture] Text, [placeOfArrival] Text, [meanRating] Integer, [noReviews] Integer);
INSERT INTO "Trips" VALUES(14,'Blue Lagoon',1494642920,1494657328,15500,'The geothermal water originates 2,000 metres below the surface, where freshwater and seawater combine at extreme temperatures. It is then harnessed via drilling holes at a nearby geothermal power plant, Svartsengi, to create electricity and hot water for nearby communities.
On its way to the surface, the water picks up silica and minerals. When the water emerges, its temperature is generally between 37°C and 40°C (98-104°F). But owing to variables outside of our control - including weather and time of year - the water temperature sometimes fluctuates beyond this range.',100,30,'Snorkeling',4,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(15,'Blue Lagoon',1495923276,1495936673,11300,'The geothermal water originates 2,000 metres below the surface, where freshwater and seawater combine at extreme temperatures. It is then harnessed via drilling holes at a nearby geothermal power plant, Svartsengi, to create electricity and hot water for nearby communities.\n
On its way to the surface, the water picks up silica and minerals. When the water emerges, its temperature is generally between 37°C and 40°C (98-104°F). But owing to variables outside of our control - including weather and time of year - the water temperature sometimes fluctuates beyond this range.',100,92,'Snorkeling',4,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(19,'Blue Lagoon',1498381106,1498407224,10200,'The geothermal water originates 2,000 metres below the surface, where freshwater and seawater combine at extreme temperatures. It is then harnessed via drilling holes at a nearby geothermal power plant, Svartsengi, to create electricity and hot water for nearby communities.\n
On its way to the surface, the water picks up silica and minerals. When the water emerges, its temperature is generally between 37°C and 40°C (98-104°F). But owing to variables outside of our control - including weather and time of year - the water temperature sometimes fluctuates beyond this range.',100,31,'Snorkeling',6,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(5,'Blue Lagoon',1496149552,1496160899,9200,'The geothermal water originates 2,000 metres below the surface, where freshwater and seawater combine at extreme temperatures. It is then harnessed via drilling holes at a nearby geothermal power plant, Svartsengi, to create electricity and hot water for nearby communities.
On its way to the surface, the water picks up silica and minerals. When the water emerges, its temperature is generally between 37°C and 40°C (98-104°F). But owing to variables outside of our control - including weather and time of year - the water temperature sometimes fluctuates beyond this range.',100,24,'Snorkeling',2,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(8,'Blue Lagoon',1495840881,1495868887,18800,'The geothermal water originates 2,000 metres below the surface, where freshwater and seawater combine at extreme temperatures. It is then harnessed via drilling holes at a nearby geothermal power plant, Svartsengi, to create electricity and hot water for nearby communities.
On its way to the surface, the water picks up silica and minerals. When the water emerges, its temperature is generally between 37°C and 40°C (98-104°F). But owing to variables outside of our control - including weather and time of year - the water temperature sometimes fluctuates beyond this range.',100,4,'Snorkeling',3,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(2,'Golden Circle',1493641600,1493664573,13900,'This is definitely Iceland''s must-see! We travel in the comfort of our modified 4x4 trucks. The first destination is the stunning Thingvellir National Park, where Iceland''s first parliament, Althingi, was founded in the year 930 AD. It has been a UNESCO World Heritage site since 2004. We cross the mountain pass of Lyngdalsheidi to reach Lake Laugarvatn which is surrounded by geothermal activity.',100,77,'Road Trip',1,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(17,'Golden Circle',1496623915,1496651380,9100,'This is definitely Iceland''s must-see! We travel in the comfort of our modified 4x4 trucks. The first destination is the stunning Thingvellir National Park, where Iceland''s first parliament, Althingi, was founded in the year 930 AD. It has been a UNESCO World Heritage site since 2004. We cross the mountain pass of Lyngdalsheidi to reach Lake Laugarvatn which is surrounded by geothermal activity.',100,3,'Road Trip',5,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(3,'Landmannalaugar',1499072500,1499086709,4400,'Enjoy a day tour to the Southern Highland of Fjallabak to visit Iceland''''s Landmannalaugar and Hekla Volcano area. Hike through Laugahraun, Vondugil Canyon and Brennisteinsalda, before relaxing in a natural hot spring.',100,1,'Hiking',1,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(12,'Landmannalaugar',1496794562,1496823770,19700,'Enjoy a day tour to the Southern Highland of Fjallabak to visit Iceland''''s Landmannalaugar and Hekla Volcano area. Hike through Laugahraun, Vondugil Canyon and Brennisteinsalda, before relaxing in a natural hot spring.',100,96,'Hiking',4,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(18,'Sightseeing the Highlands',1496160373,1496174898,11400,'This tour will take you in a super jeep from Akureyri to the highlights of the north. A full day of exploring the wonders of nature. This tour is perfect for those who like to explore without driving your self.',100,97,'Hiking',5,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(9,'Sightseeing the Highlands',1495128614,1495148080,1500,'This tour will take you in a super jeep from Akureyri to the highlights of the north. A full day of exploring the wonders of nature. This tour is perfect for those who like to explore without driving your self.',100,31,'Hiking',3,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(13,'Sightseeing the Highlands',1496398493,1496411379,6900,'This tour will take you in a super jeep from Akureyri to the highlights of the north. A full day of exploring the wonders of nature. This tour is perfect for those who like to explore without driving your self.',100,35,'Hiking',4,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(4,'Sightseeing the Highlands',1494467003,1494486866,13900,'This tour will take you in a super jeep from Akureyri to the highlights of the north. A full day of exploring the wonders of nature. This tour is perfect for those who like to explore without driving your self.',100,84,'Hiking',1,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(16,'Sightseeing the Highlands',1493938831,1493957671,11300,'This tour will take you in a super jeep from Akureyri to the highlights of the north. A full day of exploring the wonders of nature. This tour is perfect for those who like to explore without driving your self.',100,53,'Hiking',4,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(6,'Snaefellsnes Whalewatching',1493872695,1493894630,19600,'Your whale watching adventure begins at Reykjavik''s Old Harbour, just minutes away from the city centre! Our boats offer great comfort, a fantastic interior, large outside viewing decks and a safe family environment. The friendly guides, along with the captain and crew, point out where to spot the whales and give interesting information about the different kinds of whales and seabirds you can expect to see. ',100,43,'Cruise',2,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(10,'Snaefellsnes Whalewatching',1493167797,1493183031,14800,'Your whale watching adventure begins at Reykjavik''s Old Harbour, just minutes away from the city centre! Our boats offer great comfort, a fantastic interior, large outside viewing decks and a safe family environment. The friendly guides, along with the captain and crew, point out where to spot the whales and give interesting information about the different kinds of whales and seabirds you can expect to see. ',100,72,'Cruise',3,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(7,'Snaefellsnes Whalewatching',1499378496,1499398690,15000,'Your whale watching adventure begins at Reykjavik''s Old Harbour, just minutes away from the city centre! Our boats offer great comfort, a fantastic interior, large outside viewing decks and a safe family environment. The friendly guides, along with the captain and crew, point out where to spot the whales and give interesting information about the different kinds of whales and seabirds you can expect to see. ',100,42,'Cruise',2,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(11,'Snaefellsnes Whalewatching',1492645755,1492656868,11900,'Your whale watching adventure begins at Reykjavik''s Old Harbour, just minutes away from the city centre! Our boats offer great comfort, a fantastic interior, large outside viewing decks and a safe family environment. The friendly guides, along with the captain and crew, point out where to spot the whales and give interesting information about the different kinds of whales and seabirds you can expect to see. ',100,37,'Cruise',4,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(20,'Snaefellsnes Whalewatching',1494638004,1494648724,15300,'Your whale watching adventure begins at Reykjavik''s Old Harbour, just minutes away from the city centre! Our boats offer great comfort, a fantastic interior, large outside viewing decks and a safe family environment. The friendly guides, along with the captain and crew, point out where to spot the whales and give interesting information about the different kinds of whales and seabirds you can expect to see. ',100,34,'Cruise',6,'Reykjavik','Reykjavik',NULL,NULL);
INSERT INTO "Trips" VALUES(1,'South Coast',1498395476,1498419113,3300,'See some of Iceland''s golden attractions on a 7-hour tour of the Golden Circle from Reykjavik, and combine it with a warm and relaxing bath in the natural thermal waters of the Secret Lagoon. Go to Thingvellir, and travel between continental plates.',100,59,'Road Trip',1,'Reykjavik','Reykjavik',NULL,NULL);

UPDATE Trips 
SET meanRating = (SELECT avg(stars) FROM Reviews WHERE Reviews.tripName = Trips.tripName),
noReviews = (SELECT COUNT(*) from Reviews WHERE Reviews.tripName = Trips.tripname);

COMMIT;